# DOUCMENTATION: https://docs.getdbt.com/reference/model-properties

version: 2

models:
  - name: pim__menu_recipes
    description: "Bridge table to link menus and recipes"
    columns:
      - name: menu_recipe_id
        data_type: int
        description: "{{ doc('column__menu_recipe_id') }}"
        data_tests:
          - unique
          - not_null

      - name: menu_id
        data_type: int
        description: "{{ doc('column__menu_id') }}"
        data_tests:
          - not_null

      - name: recipe_id
        data_type: int
        description: "{{ doc('column__recipe_id') }}"
        data_tests:
          - not_null

      - name: menu_recipe_order
        data_type: smallint
        description: "{{ doc('column__menu_recipe_order') }}"
        data_tests:
          - not_null

  - name: pim__menu_variations
    description: "This table links menus to variations. Hence there is one row per menu_id and product_variation_id."
    columns:
      - name: menu_variation_id
        data_type: int
        description: "{{ doc('column__menu_variation_id') }}"
        data_tests:
          - unique
          - not_null

      - name: menu_id
        data_type: int
        description: "{{ doc('column__menu_id') }}"
        data_tests:
          - not_null

      - name: portion_id
        data_type: int
        description: "{{ doc('column__portion_id') }}"
        data_tests:
          - not_null

      - name: product_variation_id
        data_type: char(36)
        description: "{{ doc('column__product_variation_id') }}"
        data_tests:
          - not_null

      - name: menu_number_days
        data_type: smallint
        description: "{{ doc('column__menu_number_days') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn

  - name: pim__menus
    description: "All menus per weekly menu. Each menu realtes to a product."
    columns:
      - name: menu_id
        data_type: int
        description: "{{ doc('column__menu_id') }}"
        data_tests:
          - unique
          - not_null

      - name: weekly_menu_id
        data_type: int
        description: "{{ doc('column__weekly_menu_id') }}"
        data_tests:
          - not_null

      - name: product_id
        data_type: char(36)
        description: "{{ doc('column__product_id') }}"
        data_tests:
          - not_null

      - name: menu_status_code_id
        data_type: int
        description: "{{ doc('column__pim_status_code_id') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn

  - name: pim__portions
    description: ""

  - name: pim__recipe_portions
    description: "Links recipes to the possible portion variations"
    columns:
      - name: recipe_portion_id
        data_type: int
        description: "{{ doc('column__recipe_portion_id') }}"
        data_tests:
          - unique
          - not_null

      - name: recipe_id
        data_type: int
        description: "{{ doc('column__recipe_id') }}"
        data_tests:
          - not_null

      - name: portion_id
        data_type: int
        description: "{{ doc('column__portion_id') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn

  - name: pim__weekly_menus
    description: "This table holds information about each menu week (delivery week). There is one row per company per week of the year."
    columns:
      - name: weekly_menu_id
        data_type: int
        description: "{{ doc('column__weekly_menu_id') }}"
        data_tests:
          - unique
          - not_null

      - name: company_id
        data_type: char(36)
        description: "{{ doc('column__company_id') }}"
        data_tests:
          - not_null

      - name: weekly_menu_status_code_id
        data_type: int
        description: "{{ doc('column__pim_status_code_id') }}"
        data_tests:
          - not_null

      - name: menu_week
        data_type: smallint
        description: "{{ doc('column__menu_week') }}"
        data_tests:
          - not_null

      - name: menu_year
        data_type: smallint
        description: "{{ doc('column__menu_year') }}"
        data_tests:
          - not_null

      - name: menu_week_monday_date
        data_type: date
        description: "{{ doc('column__menu_week_monday_date') }}"
        data_tests:
          - not_null

  - name: pim__recipes
    description: ""
    columns:
      - name: recipe_id
        data_type: int
        description: "{{ doc('column__recipe_id') }}"
        data_tests:
          - unique
          - not_null

      - name: recipe_metadata_id
        data_type: int
        description: "{{ doc('column__recipe_metadata_id') }}"
        data_tests:
          - unique
          - not_null

      - name: main_recipe_id
        data_type: int
        description: "{{ doc('column__main_recipe_id') }}"

      - name: recipe_status_code_id
        data_type: int
        description: "{{ doc('column__pim_status_code_id') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: varchar(50)
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_updated_by
        data_type: varchar(50)
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn

  - name: pim__recipe_companies
    description: ""

  - name: pim__recipe_metadata
    description: ""

    columns:
      - name: recipe_metadata_id
        data_type: int
        description: "{{ doc('column__recipe_metadata_id') }}"  #recipe_metadata

      - name: recipe_main_ingredient_id
        data_type: int
        description: "{{ doc('column__recipe_main_ingredient_id') }}"   # recipe_main_ingredient

      - name: recipe_difficulty_level_id
        data_type: int
        description: "{{ doc('column__recipe_difficulty_level_id') }}"   # recipe_difficulty_level_translations 

      - name: cooking_time_from
        data_type: int
        description: "{{ doc('column__cooking_time_from') }}"   # metadata 

      - name: cooking_time_to
        data_type: int
        description: "{{ doc('column__cooking_time_to') }}"   # metadata 
      
      - name: recipe_photo
        data_type: string
        description: "{{ doc('column__recipe_photo') }}"    # metadata 

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: string
        description: "{{ doc('column__source_created_at') }}"

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: string
        description: "{{ doc('column__source_updated_at') }}"

  - name: pim__recipe_metadata_translations
    description: ""

  - name: pim__recipe_difficulty_level_translations
    description: ""

  - name: pim__recipe_main_ingredient_translations
    description: ""

  - name: pim__recipe_main_ingredients
    description: ""

    columns:
      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: string
        description: "{{ doc('column__source_created_at') }}"

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: string
        description: "{{ doc('column__source_updated_at') }}"

  - name: pim__taxonomy_translations
    description: "Table mapping taxonomy ids to their names in different languages"

    columns:
      - name: taxonomy_id
        data_type: int
        description: "{{ doc('column__taxonomy_id') }}"

      - name: language_id
        data_type: int
        description: ""

      - name: taxonomy_name
        data_type: string
        description: "{{ doc('column__taxonomy_name') }}"

  - name: pim__taxonomies
    description: "Table with taxonomy information"

    columns:
      - name: taxonomy_id
        data_type: int
        description: "{{ doc('column__taxonomy_id') }}"

      - name: taxonomy_status_code_id
        data_type: int
        description: "{{ doc('column__pim_status_code_id') }}"

      - name: country_id
        data_type: int
        description: "{{ doc('column__country_id') }}"

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"

      - name: is_external_taxonomy
        data_type: boolean
        description: "{{ doc('column__is_external_taxonomy') }}"

  - name: pim__recipe_taxonomies
    description: "Table mapping a recipe id to its taxonomy ids"

    columns:
      - name: recipe_id
        data_type: int
        description: "{{ doc('column__recipe_id') }}"

      - name: taxonomy_id
        data_type: int
        description: "{{ doc('column__taxonomy_id') }}"

  - name: pim__generic_ingredient_translations
    description: "Table mapping generic ingredient ids to their names in different languages"

    columns:
      - name: generic_ingredient_id
        data_type: int
        description: "{{ doc('column__generic_ingredient_id') }}"

      - name: language_id
        data_type: int
        description: ""

      - name: generic_ingredient_name
        data_type: string
        description: "{{ doc('column__generic_ingredient_name') }}"

  - name: pim__chef_ingredient_sections
    description: "Table mapping chef ingredient sections to recipe portions"

    columns:
      - name: chef_ingredient_section_id
        data_type: int
        description: "{{ doc('column__chef_ingredient_section_id') }}"

      - name: recipe_portion_id
        data_type: int
        description: "{{ doc('column__recipe_portion_id') }}"

  - name: pim__chef_ingredients
    description: "Table containing chef ingredient information (an instance of generic ingredient)"

    columns:
      - name: chef_ingredient_id
        data_type: int
        description: "{{ doc('column__chef_ingredient_id') }}"

      - name: chef_ingredient_section_id
        data_type: int
        description: "{{ doc('column__chef_ingredient_section_id') }}"

      - name: order_ingredient_id
        data_type: int
        description: "{{ doc('column__order_ingredient_id') }}"

      - name: generic_ingredient_id
        data_type: int
        description: "{{ doc('column__generic_ingredient_id') }}"

      - name: ingredient_amount
        data_type: string
        description: "{{ doc('column__ingredient_amount') }}"

  - name: pim__ingredient_category_translations
    description: "Table mapping ingredient category ids to their names in different languages"

    columns:
      - name: ingredient_category_id
        data_type: int
        description: "{{ doc('column__ingredient_category_id') }}"

      - name: language_id
        data_type: int
        description: ""

      - name: ingredient_category_name
        data_type: string
        description: "{{ doc('column__ingredient_category_name') }}"

  - name: pim__ingredients
    description: "Table with ingredient information"

    columns:
      - name: ingredient_id
        data_type: int
        description: "{{ doc('column__ingredient_id') }}"

      - name: supplier_id
        data_type: int
        description: "{{ doc('column__supplier_id') }}"

      - name: ingredient_category_id
        data_type: int
        description: "{{ doc('column__ingredient_category_id') }}"

      - name: ingredient_status_code_id
        data_type: int
        description: "{{ doc('column__pim_status_code_id') }}"

      - name: ingredient_internal_reference
        data_type: string
        description: "{{ doc('column__ingredient_internal_reference') }}"

      - name: ingredient_content
        data_type: string
        description: "{{ doc('column__ingredient_content') }}"

      - name: ingredient_type
        data_type: string
        description: "{{ doc('column__ingredient_type') }}"

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"

      - name: is_active
        data_type: boolean
        description: ""

  - name: pim__order_ingredients
    description: "Table connecting ingredient to a specific recipe variation"

    columns:
      - name: order_ingredient_id
        data_type: int
        description: "{{ doc('column__order_ingredient_id') }}"

      - name: ingredient_internal_reference
        data_type: string
        description: "{{ doc('column__ingredient_internal_reference') }}"

      - name: is_main_protein
        data_type: boolean
        description: "{{ doc('column__is_main_protein') }}"

      - name: is_main_carbohydrate
        data_type: boolean
        description: "{{ doc('column__is_main_carbohydrate') }}"

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"

  - name: pim__ingredient_categories
    description: "Table with ingredient category information"

    columns:
      - name: ingredient_category_id
        data_type: int
        description: "{{ doc('column__ingredient_category_id') }}"

      - name: ingredient_category_status_code_id
        data_type: int
        description: "{{ doc('column__pim_status_code_id') }}"

      - name: parent_category_id
        data_type: int
        description: "{{ doc('column__parent_category_id') }}"

      - name: country_id
        data_type: char(36)
        description: "{{ doc('column__country_id') }}"

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
  - name: pim__recipe_ratings
    description: "Reported ratings (1-5) by the customer on purchased recipes"
    columns:
      - name: recipe_id
        data_type: int
        description: "{{ doc('column__recipe_id') }}"
        data_tests:
          - not_null

      - name: billing_agreement_id
        data_type: int
        description: "{{ doc('column__billing_agreement_id') }}"
        data_tests:
          - not_null

      - name: recipe_rating
        data_type: int
        description: "{{ doc('column__recipe_rating') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: varchar(100)
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null:
              config:
                severity: warn

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: varchar(100)
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null:
              config:
                severity: warn

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null:
              config:
                severity: warn

  - name: pim__recipe_comments
    description: "Free text comments by the customer on purchased recipes"
    columns:
      - name: recipe_id
        data_type: int
        description: "{{ doc('column__recipe_id') }}"
        data_tests:
          - not_null

      - name: billing_agreement_id
        data_type: int
        description: "{{ doc('column__billing_agreement_id') }}"
        data_tests:
          - not_null

      - name: recipe_comment
        data_type: string
        description: "{{ doc('column__recipe_comment') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: varchar(100)
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null:
              config:
                severity: warn

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: varchar(100)
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null:
              config:
                severity: warn

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null:
              config:
                severity: warn