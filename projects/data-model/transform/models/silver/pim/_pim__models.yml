# DOUCMENTATION: https://docs.getdbt.com/reference/model-properties

version: 2

models:
  - name: pim__menu_recipes
    description: "Bridge table to link menus and recipes"
    columns:
      - name: menu_recipe_id
        data_type: int
        description: "{{ doc('column__menu_recipe_id') }}"
        data_tests:
          - unique
          - not_null

      - name: menu_id
        data_type: int
        description: "{{ doc('column__menu_id') }}"
        data_tests:
          - not_null

      - name: recipe_id
        data_type: int
        description: "{{ doc('column__recipe_id') }}"
        data_tests:
          - not_null

      - name: menu_recipe_order
        data_type: smallint
        description: "{{ doc('column__menu_recipe_order') }}"
        data_tests:
          - not_null

  - name: pim__menu_variations
    description: "This table links menus to variations. Hence there is one row per menu_id and product_variation_id."
    columns:
      - name: menu_variation_id
        data_type: int
        description: "{{ doc('column__menu_variation_id') }}"
        data_tests:
          - unique
          - not_null

      - name: menu_id
        data_type: int
        description: "{{ doc('column__menu_id') }}"
        data_tests:
          - not_null

      - name: portion_id
        data_type: int
        description: "{{ doc('column__portion_id') }}"
        data_tests:
          - not_null

      - name: product_variation_id
        data_type: char(36)
        description: "{{ doc('column__product_variation_id') }}"
        data_tests:
          - not_null

      - name: menu_number_days
        data_type: smallint
        description: "{{ doc('column__menu_number_days') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn

  - name: pim__menus
    description: "All menus per weekly menu. Each menu realtes to a product."
    columns:
      - name: menu_id
        data_type: int
        description: "{{ doc('column__menu_id') }}"
        data_tests:
          - unique
          - not_null

      - name: weekly_menu_id
        data_type: int
        description: "{{ doc('column__weekly_menu_id') }}"
        data_tests:
          - not_null

      - name: product_id
        data_type: char(36)
        description: "{{ doc('column__product_id') }}"
        data_tests:
          - not_null

      - name: menu_status_code_id
        data_type: int
        description: "{{ doc('column__pim_status_code_id') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn


      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null:
              config:
                  severity: warn

      - name: is_selected_menu
        data_type: boolean
        description: "{{ doc('column__is_selected_menu') }}"

      - name: is_locked_recipe
        data_type: boolean
        description: "{{ doc('column__is_locked_recipe') }}"

  - name: pim__portions
    description: ""
    columns:
      - name: portion_id
        data_type: int
        description: "{{ doc('column__portion_id') }}"
        constraints:
          - type: primary_key
          - type: unique
          - type: not_null
        data_tests:
          - unique
          - not_null

      - name: main_portion_id
        data_type: int
        description: "{{ doc('column__main_portion_id') }}"
        constraints:
          - type: foreign_key

      - name: portion_status_code_id
        data_type: int
        description: "{{ doc('column__portion_status_code_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: portion_size
        data_type: int
        description: "{{ doc('column__portion_size') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

  - name: pim__recipe_portions
    description: "Links recipes to the possible portion variations"
    columns:
      - name: recipe_portion_id
        data_type: int
        description: "{{ doc('column__recipe_portion_id') }}"
        constraints:
          - type: primary_key
          - type: unique
          - type: not_null
        data_tests:
          - unique
          - not_null

      - name: recipe_id
        data_type: int
        description: "{{ doc('column__recipe_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: portion_id
        data_type: int
        description: "{{ doc('column__portion_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"

  - name: pim__weekly_menus
    description: "This table holds information about each menu week (delivery week). There is one row per company per week of the year."
    columns:
      - name: weekly_menu_id
        data_type: int
        description: "{{ doc('column__weekly_menu_id') }}"
        data_tests:
          - unique
          - not_null

      - name: company_id
        data_type: char(36)
        description: "{{ doc('column__company_id') }}"
        data_tests:
          - not_null

      - name: weekly_menu_status_code_id
        data_type: int
        description: "{{ doc('column__pim_status_code_id') }}"
        data_tests:
          - not_null

      - name: menu_week
        data_type: smallint
        description: "{{ doc('column__menu_week') }}"
        data_tests:
          - not_null

      - name: menu_year
        data_type: smallint
        description: "{{ doc('column__menu_year') }}"
        data_tests:
          - not_null

      - name: menu_week_monday_date
        data_type: date
        description: "{{ doc('column__menu_week_monday_date') }}"
        data_tests:
          - not_null

  - name: pim__recipes
    description: ""
    columns:
      - name: recipe_id
        data_type: int
        description: "{{ doc('column__recipe_id') }}"
        constraints:
          - type: primary_key
          - type: unique
          - type: not_null
        data_tests:
          - unique
          - not_null

      - name: recipe_metadata_id
        data_type: int
        description: "{{ doc('column__recipe_metadata_id') }}"
        constraints:
          - type: foreign_key
          - type: unique
          - type: not_null
        data_tests:
          - unique
          - not_null

      - name: main_recipe_id
        data_type: int
        description: "{{ doc('column__main_recipe_id') }}"

      - name: recipe_status_code_id
        data_type: int
        description: "{{ doc('column__recipe_status_code_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: main_recipe_created_by
        data_type: varchar(50)
        description: "{{ doc('column__main_recipe_created_by') }}"

      - name: main_recipe_created_at
        data_type: timestamp
        description: "{{ doc('column__main_recipe_created_at') }}"

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"

      - name: source_updated_by
        data_type: varchar(50)
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"

      - name: main_recipe_variation_suffix
        data_type: string
        description: "{{ doc('column__main_recipe_variation_suffix') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: main_recipe_variation_id
        data_type: string
        description: "{{ doc('column__main_recipe_variation_id') }}"

      - name: recipe_average_rating
        data_type: decimal(6,4)
        description: "{{ doc('column__recipe_average_rating') }}"

      - name: recipe_shelf_life_days
        data_type: int
        description: "{{ doc('column__recipe_shelf_life_days') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: is_in_recipe_universe
        data_type: boolean
        description: "{{ doc('column__is_in_recipe_universe') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

  - name: pim__recipe_companies
    description: ""

  - name: pim__recipe_metadata
    description: ""
    columns:
      - name: recipe_metadata_id
        data_type: int
        description: "{{ doc('column__recipe_metadata_id') }}"
        constraints:
          - type: primary_key
          - type: unique
          - type: not_null
        data_tests:
          - unique
          - not_null

      - name: recipe_main_ingredient_id
        data_type: int
        description: "{{ doc('column__recipe_main_ingredient_id') }}"
        constraints:
          - type: foreign_key

      - name: recipe_difficulty_level_id
        data_type: int
        description: "{{ doc('column__recipe_difficulty_level_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: cooking_time_from
        data_type: smallint
        description: "{{ doc('column__cooking_time_from') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: cooking_time_to
        data_type: smallint
        description: "{{ doc('column__cooking_time_to') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: recipe_photo
        data_type: string
        description: "{{ doc('column__recipe_photo') }}"

      - name: cooking_time
        data_type: string
        description: "{{ doc('column__cooking_time') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: has_recipe_photo
        data_type: boolean
        description: "{{ doc('column__has_recipe_photo') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"

  - name: pim__recipe_metadata_translations
    description: "Miscellaneous text information along with each recipe, used on frontend."

    columns:
      - name: recipe_metadata_id
        data_type: int
        description: "{{ doc('column__recipe_metadata_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: language_id
        data_type: int
        description: "{{ doc('column__language_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: recipe_name
        data_type: string
        description: "{{ doc('column__recipe_name') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: recipe_photo_caption
        data_type: string
        description: "{{ doc('column__recipe_photo_caption') }}"

      - name: roede_calculation_text
        data_type: string
        description: "{{ doc('column__roede_calculation_text') }}"

      - name: recipe_extra_photo_caption
        data_type: string
        description: "{{ doc('column__recipe_extra_photo_caption') }}"

      - name: recipe_general_text
        data_type: string
        description: "{{ doc('column__recipe_general_text') }}"

      - name: recipe_description
        data_type: string
        description: "{{ doc('column__recipe_description') }}"

      - name: recipe_name_headline
        data_type: string
        description: "{{ doc('column__recipe_name_headline') }}"

      - name: recipe_name_subheadline
        data_type: string
        description: "{{ doc('column__recipe_name_subheadline') }}"

  - name: pim__recipe_difficulty_level_translations
    description: ""

  - name: pim__recipe_main_ingredient_translations
    description: ""

  - name: pim__recipe_main_ingredients
    description: ""

    columns:
      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: string
        description: "{{ doc('column__source_created_at') }}"

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: string
        description: "{{ doc('column__source_updated_at') }}"

  - name: pim__taxonomy_translations
    description: "Table mapping taxonomy ids to their names in different languages"

    columns:
      - name: taxonomy_id
        data_type: int
        description: "{{ doc('column__taxonomy_id') }}"

      - name: language_id
        data_type: int
        description: "{{ doc('column__language_id') }}"

      - name: taxonomy_name
        data_type: string
        description: "{{ doc('column__taxonomy_name') }}"

  - name: pim__taxonomies
    description: "Table with taxonomy information"

    columns:
      - name: taxonomy_id
        data_type: int
        description: "{{ doc('column__taxonomy_id') }}"

      - name: taxonomy_status_code_id
        data_type: int
        description: "{{ doc('column__pim_status_code_id') }}"

      - name: country_id
        data_type: int
        description: "{{ doc('column__country_id') }}"

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"

      - name: is_external_taxonomy
        data_type: boolean
        description: "{{ doc('column__is_external_taxonomy') }}"

  - name: pim__recipe_taxonomies
    description: "Table mapping a recipe id to its taxonomy ids"

    columns:
      - name: recipe_id
        data_type: int
        description: "{{ doc('column__recipe_id') }}"

      - name: taxonomy_id
        data_type: int
        description: "{{ doc('column__taxonomy_id') }}"

  - name: pim__generic_ingredient_translations
    description: "Table mapping generic ingredient ids to their names in different languages"

    columns:
      - name: generic_ingredient_id
        data_type: int
        description: "{{ doc('column__generic_ingredient_id') }}"

      - name: language_id
        data_type: int
        description: "{{ doc('column__language_id') }}"

      - name: generic_ingredient_name
        data_type: string
        description: "{{ doc('column__generic_ingredient_name') }}"

  - name: pim__chef_ingredient_sections
    description: "Table mapping chef ingredient sections to recipe portions"

    columns:
      - name: chef_ingredient_section_id
        data_type: int
        description: "{{ doc('column__chef_ingredient_section_id') }}"

      - name: recipe_portion_id
        data_type: int
        description: "{{ doc('column__recipe_portion_id') }}"

  - name: pim__chef_ingredients
    description: "Table containing chef ingredient information (an instance of generic ingredient)"

    columns:
      - name: chef_ingredient_id
        data_type: int
        description: "{{ doc('column__chef_ingredient_id') }}"

      - name: chef_ingredient_section_id
        data_type: int
        description: "{{ doc('column__chef_ingredient_section_id') }}"

      - name: order_ingredient_id
        data_type: int
        description: "{{ doc('column__order_ingredient_id') }}"

      - name: generic_ingredient_id
        data_type: int
        description: "{{ doc('column__generic_ingredient_id') }}"

      - name: ingredient_amount
        data_type: string
        description: "{{ doc('column__ingredient_amount') }}"

  - name: pim__ingredient_category_translations
    description: "Table mapping ingredient category ids to their names in different languages"

    columns:
      - name: ingredient_category_id
        data_type: int
        description: "{{ doc('column__ingredient_category_id') }}"

      - name: language_id
        data_type: int
        description: "{{ doc('column__language_id') }}"

      - name: ingredient_category_name
        data_type: string
        description: "{{ doc('column__ingredient_category_name') }}"

      - name: ingredient_category_description
        data_type: string
        description: "{{ doc('column__ingredient_category_description') }}"

  - name: pim__ingredients
    description: "Table with ingredient information"

    columns:
      - name: ingredient_id
        data_type: int
        description: "{{ doc('column__ingredient_id') }}"

      - name: supplier_id
        data_type: int
        description: "{{ doc('column__supplier_id') }}"

      - name: ingredient_category_id
        data_type: int
        description: "{{ doc('column__ingredient_category_id') }}"

      - name: ingredient_status_code_id
        data_type: int
        description: "{{ doc('column__pim_status_code_id') }}"

      - name: ingredient_internal_reference
        data_type: string
        description: "{{ doc('column__ingredient_internal_reference') }}"

      - name: ingredient_content
        data_type: string
        description: "{{ doc('column__ingredient_content') }}"

      - name: ingredient_type
        data_type: string
        description: "{{ doc('column__ingredient_type') }}"

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"

      - name: is_active
        data_type: boolean
        description: ""

  - name: pim__order_ingredients
    description: "Table connecting ingredient to a specific recipe variation"

    columns:
      - name: order_ingredient_id
        data_type: int
        description: "{{ doc('column__order_ingredient_id') }}"

      - name: ingredient_internal_reference
        data_type: string
        description: "{{ doc('column__ingredient_internal_reference') }}"

      - name: is_main_protein
        data_type: boolean
        description: "{{ doc('column__is_main_protein') }}"

      - name: is_main_carbohydrate
        data_type: boolean
        description: "{{ doc('column__is_main_carbohydrate') }}"

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"

  - name: pim__ingredient_categories
    description: "Table with ingredient category information"

    columns:
      - name: ingredient_category_id
        data_type: int
        description: "{{ doc('column__ingredient_category_id') }}"

      - name: ingredient_category_status_code_id
        data_type: int
        description: "{{ doc('column__pim_status_code_id') }}"

      - name: parent_category_id
        data_type: int
        description: "{{ doc('column__parent_category_id') }}"

      - name: country_id
        data_type: char(36)
        description: "{{ doc('column__country_id') }}"

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"

  - name: pim__recipe_ratings
    description: "Reported ratings (1-5) by the customer on purchased recipes"
    columns:
      - name: recipe_id
        data_type: int
        description: "{{ doc('column__recipe_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: billing_agreement_id
        data_type: int
        description: "{{ doc('column__billing_agreement_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: recipe_rating
        data_type: int
        description: "{{ doc('column__recipe_rating') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: recipe_rating_score
        data_type: double
        description: "{{ doc('column__recipe_rating_score') }}"

      - name: is_not_cooked_dish
        data_type: boolean
        description: "{{ doc('column__is_not_cooked_dish') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: source_created_by
        data_type: varchar(100)
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: varchar(100)
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"

  - name: pim__recipe_comments
    description: "Free text comments by the customer on purchased recipes"
    columns:
      - name: recipe_id
        data_type: int
        description: "{{ doc('column__recipe_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: billing_agreement_id
        data_type: int
        description: "{{ doc('column__billing_agreement_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: recipe_comment
        data_type: string
        description: "{{ doc('column__recipe_comment') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: source_created_by
        data_type: varchar(100)
        description: "{{ doc('column__source_created_by') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: varchar(100)
        description: "{{ doc('column__source_updated_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"

  - name: pim__recipe_translations
    description: "Additional internal or customer facing text information accompanying the recipes. See also pim__recipe_metadata_translations."
    columns:
      - name: recipe_id
        data_type: int
        description: "{{ doc('column__recipe_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: language_id
        data_type: int
        description: "{{ doc('column__language_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: recipe_comment
        data_type: string
        description: "{{ doc('column__recipe_comment') }}"

      - name: recipe_chef_tip
        data_type: string
        description: "{{ doc('column__recipe_chef_tip') }}"

  - name: pim__portion_translations
    description: "Additional text information to the portion sizes"
    columns:
      - name: portion_id
        data_type: int
        description: "{{ doc('column__portion_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
  
  - name: pim__taxonomy_types
    description: "Table of taxonomy type information"
    columns:
      - name: taxonomy_type_id
        data_type: int
        description: "{{ doc('column__taxonomy_type_id') }}"
        data_tests:
          - not_null
          - unique

      - name: taxonomy_type_name
        data_type: string
        description: "{{ doc('column__taxonomy_type_name') }}"
        data_tests:
          - not_null

  - name: pim__status_code_translations
    description: "Table mapping status code ids to their names in different languages"
    columns:
      - name: status_code_id
        data_type: int
        description: "{{ doc('column__pim_status_code_id') }}"
        data_tests:
          - not_null

      - name: language_id
        data_type: int
        description: "{{ doc('column__language_id') }}"
        constraints:
          - type: foreign_key
          - type: not_null
        data_tests:
          - not_null

      - name: status_code_name
        data_type: string
        description: "{{ doc('column__status_code_name') }}"
        data_tests:
          - not_null

      - name: status_code_description
        data_type: string
        description: "{{ doc('column__status_code_description') }}"
      
  - name: pim__allergy_preferences
    description: "Table connecting allergy ids to preference ids"

    columns:
      - name: allergy_id
        data_type: int
        description: "{{ doc('column__allergy_id') }}" #agathe
        data_tests:
          - not_null

      - name: preference_id
        data_type: string
        description: "{{ doc('column__preference_id') }}"
        data_tests:
          - not_null
  
  - name: pim__ingredient_allergies
    description: "Table connecting ingredient ids to allergy ids"

    columns:
      - name: ingredient_id
        data_type: int
        description: "{{ doc('column__ingredient_id') }}"
        data_tests:
          - not_null

      - name: allergy_id
        data_type: int
        description: "{{ doc('column__allergy_id') }}"
        data_tests:
          - not_null
      
      - name: has_trace_of
        data_type: boolean
        description: "{{ doc('column__has_trace_of') }}" #agathe
        data_tests:
          - not_null
  
  - name: pim__ingredient_category_preferences
    description: "Table connecting ingredient category ids to preference ids"

    columns:
      - name: ingredient_category_id
        data_type: int
        description: "{{ doc('column__ingredient_category_id') }}"
        data_tests:
          - not_null

      - name: preference_id
        data_type: string
        description: "{{ doc('column__preference_id') }}"
        data_tests:
          - not_null

  - name: pim__ingredient_translations
    description: "Table mapping ingredient ids to their names in different languages"

    columns:
      - name: ingredient_id
        data_type: int
        description: "{{ doc('column__ingredient_id') }}"
        data_tests:
          - not_null

      - name: language_id
        data_type: int
        description: "{{ doc('column__language_id') }}"
        data_tests:
          - not_null

      - name: ingredient_name
        data_type: string
        description: "{{ doc('column__ingredient_name') }}"
        data_tests:
          - not_null
    
  - name: pim__allergy_translations
    description: "Table mapping allergy ids to their names in different languages"

    columns:
      - name: allergy_id
        data_type: int
        description: "{{ doc('column__allergy_id') }}"
        data_tests:
          - not_null

      - name: language_id
        data_type: int
        description: "{{ doc('column__language_id') }}"
        data_tests:
          - not_null
      
      - name: allergy_name
        data_type: string
        description: "{{ doc('column__allergy_name') }}"
        data_tests:
          - not_null
