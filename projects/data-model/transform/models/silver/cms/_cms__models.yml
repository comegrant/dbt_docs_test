# DOUCMENTATION: https://docs.getdbt.com/reference/model-properties

version: 2

models:
  - name: cms__companies
    description: "The companies and brands of Cheffelo."

    columns:
      - name: company_id
        data_type: string
        description: "{{ doc('column__company_id') }}"

      - name: company_name
        data_type: string
        description: "{{ doc('column__company_name') }}"

      - name: country_id
        data_type: string
        description: "{{ doc('column__country_id') }}"

  - name: cms__countries
    description: "Information relevant for each country Cheffelo operates in."

    columns:
      - name: country_id
        data_type: string
        description: "{{ doc('column__country_id') }}"

      - name: country_name
        data_type: string
        description: "{{ doc('column__country_name') }}"

  - name: cms__billing_agreement_orders
    description: "All placed orders. Gets populated at order gen and updated if the order changes."

    columns:
      - name: cms_order_id
        data_type: string
        description: "{{ doc('column__cms_order_id') }}"

      - name: ops_order_id
        data_type: bigint
        description: "{{ doc('column__ops_order_id') }}"

      - name: order_type_id
        data_type: string
        description: "{{ doc('column__order_type_id') }}"

      - name: order_status_id
        data_type: string
        description: "{{ doc('column__order_status_id') }}"

      - name: agreement_id
        data_type: int
        description: "{{ doc('column__agreement_id') }}"

      - name: delivery_year
        data_type: int
        description: "{{ doc('column__delivery_year') }}"

      - name: delivery_week
        data_type: int
        description: "{{ doc('column__delivery_week') }}"

      - name: has_recipe_leaflets
        data_type: boolean
        description: "{{ doc('column__order_has_recipe_leaflets') }}"

      - name: delivery_week_monday_date
        data_type: date
        description: "{{ doc('column__delivery_week_monday_date') }}"

  - name: cms__billing_agreement_order_lines
    description: "Order lines of all placed orders. Gets populated at order gen and updated if the order changes."

    columns:
      - name: order_line_id
        data_type: string
        description: "{{ doc('column__order_line_id') }}"

      - name: cms_order_id
        data_type: string
        description: "{{ doc('column__cms_order_id') }}"

      - name: product_variation_id
        data_type: string
        description: "{{ doc('column__product_variation_id') }}"

      - name: order_line_type_name
        data_type: string
        description: "{{ doc('column__order_line_type_name') }}"

      - name: variation_qty
        data_type: int
        description: "{{ doc('column__variation_qty') }}"

      - name: vat
        data_type: decimal(10,8)
        description: "{{ doc('column__order_line_vat') }}"

      - name: unit_price_ex_vat
        data_type: decimal(20,6)
        description: "{{ doc('column__order_line_unit_price_ex_vat') }}"

      - name: unit_price_inc_vat
        data_type: decimal(32,14)
        description: "{{ doc('column__order_line_unit_price_inc_vat') }}"

      - name: total_amount_ex_vat
        data_type: decimal(31,6)
        description: "{{ doc('column__order_line_total_amount_ex_vat') }}"

      - name: total_amount_inc_vat
        data_type: decimal(38,9)
        description: "{{ doc('column__order_line_total_amount_inc_vat') }}"

  - name: cms__billing_agreement_order_status
    description: "Holds information about the status an order can have."

    columns:
      - name: order_status_id
        data_type: string
        description: "{{ doc('column__order_status_id') }}"

      - name: order_status_name
        data_type: string
        description: "{{ doc('column__order_status_name') }}"

      - name: can_be_cancelled
        data_type: boolean
        description: "{{ doc('column__order_status_can_be_cancelled') }}"

  - name: cms__order_types
    description: "Holds information about the type an order can have"

    columns:
      - name: order_type_id
        data_type: string
        description: "{{ doc('column__order_type_id') }}"

      - name: order_type_name
        data_type: string
        description: "{{ doc('column__order_type_name') }}"

      - name: is_direct_order
        data_type: boolean
        description: "{{ doc('column__order_type_is_direct_order') }}"

      - name: allow_anonymous
        data_type: boolean
        description: "{{ doc('column__order_type_allow_anonymous') }}"

      - name: is_direct_payment
        data_type: boolean
        description: "{{ doc('column__order_type_is_direct_payment') }}"

  - name: cms__billing_agreements
    description: "Information about an billing agreement. Use SCD2 when updated in the source system."
  
  - name: cms__billing_agreement_status
    description: "Information about the status an billing agreement can have"
  
  - name: cms__billing_agreement_addon_subscriptions
    description: "Information about the addon subscription a billing agreement has"
  
  - name: cms__addon_subscriptions
    description: "Information about all the different addon subscriptions that exists"

  - name: cms__loyalty_agreement_ledger
    description: "Table tracking changes in accrued loyalty points for each billing agreements"
    
  - name: cms__loyalty_levels
    description: "Informations about the different loyalty levels a customer can have. Use SCD2 when updated in the source system."