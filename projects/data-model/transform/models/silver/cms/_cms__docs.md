# Companies

{% docs column__company_id %}

The primary key of the company in the CMS database.

{% enddocs %}

{% docs column__company_name %}

The name of the company.

{% enddocs %}

# Countries

{% docs column__country_id %}

The primary key of the country in the CMS database.

{% enddocs %}

{% docs column__language_id %}

The primary key of the language id in the cms database. Used to link to the translation tables.

{% enddocs %}

{% docs column__country_name %}

The name of the country.

{% enddocs %}

{% docs column__country_currency %}

The currency code of the currency used in the country.

{% enddocs %}

{% docs column__main_vat_rate %}

The standard vat rate for the product with most revenue in the country, normally food.

{% enddocs %}

# Billing Agreement Baskets
{% docs column__billing_agreement_basket_id %}

The primary key of the basket in the CMS database.

{% enddocs %}

{% docs column__shipping_address_id_basket %}

The id of selected shipping address in the subscription of the billing agreement.

{% enddocs %}

{% docs column__timeblock_id_basket %}

The id of the subscribed timeblock of the billing agreement.

{% enddocs %}

{% docs column__basket_type_id %}

The id of the basket type:
- 550C0EF6-CD4E-487E-9F19-0CC929152497:	Mealbox
- 1F72B8C1-D765-426D-88E3-EC412FB7F4B7:	Groceries

{% enddocs %}

{% docs column__is_default_basket %}

Always 1. This column exists to support the potential of letting customers have multiple baskets.

{% enddocs %}

{% docs column__is_active_basket %}

Always 1. This column exists to support the potential of letting customers have multiple baskets.

{% enddocs %}

# Billing Agreement Basket Products

{% docs column__billing_agreement_basket_product_id %}

The primary key of the basket product in the CMS database.

{% enddocs %}

{% docs column__is_extra_basket_product %}

[Legacy: 2017-2020]
Previously it was not possible to have more than 1 quantity. So if a customer subscribed to an add-on product like 'Fruktkassen' for Godtlevert the row with 'Fruktkasse' product_id this is_extra column would equal 1. (Only exist rows for 2018 - 2019)

{% enddocs %}


# Billing Agreement Basket Deviations
{% docs column__billing_agreement_basket_deviation_id %}

The primary key of the basket deviation in the CMS database.

{% enddocs %}

{% docs column__is_active_basket_deviation %}

The most recent basket deviation for a billing agreement. I.e., what's currently in their basket.

{% enddocs %}

# Billing Agreement Basket Deviation Origins
{% docs column__billing_agreement_basket_deviation_origin_id %}

The primary key of the basket deviation origin in the CMS database.

{% enddocs %}

{% docs column__basket_deviation_origin_source_name %}

The name of the origin as it is in the CMS database.
* `Normal`: Customer, Customer Service or Sales
* `Recommendations`: Mealselector
* `Onesub - Recommendations`: Preselector
* `No Deviation`: When there has been no deviation, e.i. missing origin

{% enddocs %}

{% docs column__basket_deviation_origin_name %}

A more user friendly name of the origin of the deviation.
* `Normal`: Customer, Customer Service or Sales
* `Mealselector`: Mealselector
* `Preselector`: Preselector
* `No Deviation`: When there has been no deviation from the preset basket of the customer. I.e., there exist no rows for the basket in the deviation tables.

{% enddocs %}

{% docs column__preselector_category %}

Categorizes the origins to be preselector or not preselector.
* `Not Preselector`: Normal, Mealselector or no deviation
* `Preselector`: Preselector

{% enddocs %}

# Billing Agreement Basket Deviation Products
{% docs column__billing_agreement_basket_deviation_product_id %}

The primary key of the basket deviation product in the CMS database.

{% enddocs %}

# Order Delivery Types
{% docs column__delivery_week_type_id %}

The primary key of the order delivery week type in the CMS database.

{% enddocs %}

{% docs column__delivery_week_type_name %}

The different intervals of weekly delivery:
* Even weeks
* Odd-numbered weeks
* Every week

{% enddocs %}

# Billing Agreement Orders

{% docs column__billing_agreement_order_id %}

This is the primary key in the CMS database for each placed order. For historical orders that have not been fetched directly from CMS and are missing a billing_agreement_order_id its has been generated by taking the MD5-hash of a unique column in the table.

{% enddocs %}

{% docs column__ops_order_id %}

This is the primary key in the OPS database for each placed order. Is null if there was no order generated in OPS. This could for instance be if a customer only buy a gift card or an order was cancelled.

{% enddocs %}

{% docs column__source_created_at_orders %}

The date the order was created. Not meaning when the order was initially placed, but when it was generated by CMS. This is usually at cutoff for regular orders, but for gift card or special campaigns such as easter lamb and so on it does not follow cut off.

{% enddocs %}

{% docs column__has_recipe_leaflets %}

Flag to indiacte if order has printed recipes.

Business context: From February 2024 customers got the option to opt out of printed recipes.

{% enddocs %}

# Billing Agreement Order Lines

{% docs column__billing_agreement_order_line_id %}

This is the primary key of the order line in CMS.

{% enddocs %}

{% docs column__order_line_type_name %}

The different type of order lines.

{% enddocs %}

{% docs column__product_variation_quantity %}

Quantity ordered of the variation.

{% enddocs %}

{% docs column__unit_price_ex_vat %}

The unit price of the ordered product variation ex vat.

{% enddocs %}

{% docs column__unit_price_inc_vat %}

The unit price of the ordered product variation for inc vat.

{% enddocs %}

{% docs column__total_amount_ex_vat %}

The total amount of the order line ex vat. I.e. unit price multiplied with quantity of the variation.

{% enddocs %}

{% docs column__total_amount_inc_vat %}

The total amount of the order line inc vat. I.e. unit price multiplied with quantity of the variation.

{% enddocs %}

{% docs column__vat %}

The vat multiplier of the order.

{% enddocs %}

# Billing Agreement Order Statuses

{% docs column__order_status_id %}

The primary key of the order status in CMS.

{% enddocs %}

{% docs column__order_status_name %}
Need to figure this out

The status of the order:
* `Created`: Order is generated in CMS. Can be cancelled.
* `Processing`: Order is moved to logistics. Payment reduction (PRP) can be added and order can be cancelled.
* `Hold`: ?? Can be cancelled ??
* `Waiting`: ??
* `Cancelled`: Order is cancelled. ...
* `Finished`: Order is locked.

{% enddocs %}

{% docs column__can_be_cancelled %}

Is `1` if the order is in a state where it can be cancelled.

{% enddocs %}

# Order Types
{% docs column__order_type_id %}

This is the primary key of the order type in CMS.

{% enddocs %}

{% docs column__order_type_name %}

The name of the order type:
* `Order After Registration`
* `Daily Direct Order`
* `Loyalty`
* `Recurring`
* `Campaign`
* `Gift Card`
* `Orders after cutoff`

{% enddocs %}

{% docs column__is_direct_order %}

Orders that are not generated in relation to cut-off.

{% enddocs %}

{% docs column__allows_anonymous %}

Is one if the order can be placed without being a registered customer. Such as for gift cards.

{% enddocs %}

{% docs column__is_direct_payment %}

Is one if the order is paid for directly while purchasing. Such as for gift cards.

{% enddocs %}

# Billing Agreements

{% docs column__billing_agreement_id %}

The id of an billing agreement.

{% enddocs %}

{% docs column__sales_point_id %}

Ids used by commercial to evaluate campaigns.

{% enddocs %}

{% docs column__payment_method %}

Selected payment solution.

{% enddocs %}

{% docs column__signup_source %}

How the customer signed up:
* `Sales`: Joined through a sales channel.
* `Web`: Customer signed up through the website.
* `Flex`: Legacy. Belongs to Godtlevert Flex which existed in 2019 and 2020.

{% enddocs %}

{% docs column__signup_salesperson %}

The sales person that signed up the billing agreement.

{% enddocs %}

{% docs column__signup_date %}

The date the customer signed up

{% enddocs %}

{% docs column__signup_year_day %}

The day of the year the customer signed up

{% enddocs %}

{% docs column__signup_month_day %}

The day of the month the customer signed up

{% enddocs %}

{% docs column__signup_week_day %}

The day of the week the customer signed up

{% enddocs %}

{% docs column__signup_week %}

The week the customer signed up

{% enddocs %}

{% docs column__signup_month %}

The month name the customer signed up

{% enddocs %}

{% docs column__signup_month_number %}

The month number the customer signed up. This can be used for sorting the signup_month.

{% enddocs %}

{% docs column__signup_quarter %}

The quarter the customer signed up

{% enddocs %}

{% docs column__signup_year %}

The year the customer signed up

{% enddocs %}

{% docs column__start_date %}

Date of first delivery the customer chose when signing up. They can change this after signing up.

{% enddocs %}

{% docs column__start_year_day %}

The day of the year for the first delivery date the customer chose when signing up.

{% enddocs %}

{% docs column__start_month_day %}

The day of the month for the first delivery date the customer chose when signing up.

{% enddocs %}

{% docs column__start_week_day %}

The day of the week for the first delivery date the customer chose when signing up.

{% enddocs %}

{% docs column__start_week %}

The week of the first delivery date the customer chose when signing up.

{% enddocs %}

{% docs column__start_month %}

The month of the first delivery date the customer chose when signing up.

{% enddocs %}

{% docs column__start_quarter %}

The quarter of the first delivery date the customer chose when signing up.

{% enddocs %}

{% docs column__start_year %}

The year of the first delivery date the customer chose when signing up.

{% enddocs %}

{% docs column__signup_at %}

The timestamp the customer signed up based on when the row was created in the source table (created_at). If the date part of source_created_at is greater than the date part of start_date, we use start_date as the signup timestamp instead.

{% enddocs %}


# Billing Agreement Statuses
{% docs column__billing_agreement_status_id %}

This is the primary key of the billing agreement status in CMS.

{% enddocs %}

{% docs column__billing_agreement_status_name %}

The name of the status of the billing agreement

{% enddocs %}


# Billing Agreement Addon Subscriptions

{% docs column__is_active_addon_subscription %}

True if the addon subscription is active for the billing agreement. False if its not active.

{% enddocs %}

# Addon Subscriptions
{% docs column__addon_subscription_id %}

This is the primary key of the addon subscription in CMS.

{% enddocs %}

{% docs column__addon_subscription_name %}

The name of the addon subscription.

{% enddocs %}

# Loyalty Levels
{% docs column__loyalty_level_id %}

This is the primary key of the loyalty level in CMS.

{% enddocs %}

{% docs column__loyalty_level_number %}

The number of the loyalty level (1-4) where 1 is the entry level and 4 is the last obtainable level.

{% enddocs %}

# Loyalty Level Companies
{% docs column__loyalty_level_company_id %}

This is the primary key of the loyalty level company table in CMS.

{% enddocs %}

{% docs column__loyalty_level_name_brand %}

The name of the loyalty level in the language of the related company/brand.

{% enddocs %}

{% docs column__loyalty_level_name_english %}

The name of the loyalty level in English.

{% enddocs %}

{% docs column__point_requirement %}

The points required to reach the level.

{% enddocs %}

{% docs column__point_multiplier_accrued %}

The multiplier used to calculate accrued loyalty points earned by a customer. The number of accrued points earned on an order is equal to this multiplied by the customer's gross order value. Accrued points are the points that determine a customer's loyalty tier.

{% enddocs %}

{% docs column__point_multiplier_spendable %}

The multiplier used to calculate spendable loyalty points earned by a customer. The number of spendable points earned on an order is equal to this multipled by the customer's gross order value. Spendable points are the points that customers can spend in the points shop.

{% enddocs %}

# Loyalty Agreement Ledger
{% docs column__loyalty_agreement_ledger_id %}

This is the primary key of the loyalty level ledger in CMS.

{% enddocs %}

{% docs column__accrued_points %}

Accumulated points since last point reset.

{% enddocs %}

{% docs column__points_generated_at %}

When the customer received the points.

{% enddocs %}

# Loyalty Events

{% docs column__loyalty_event_id %}

The unique id of the loyalty event in the CMS database. An additional ID `'10000000-0000-0000-0000-000000000000'` was created by Analytics to represent transactions triggered by an agreement having no orders placed in the last 12 weeks.

{% enddocs %}

{% docs column__loyalty_event_name %}

The name of the loyalty event.

{% enddocs %}

# Preferences

{% docs column__preference_id %}

This is the primary key of the preference table in CMS.

{% enddocs %}

{% docs column__preference_type_id %}

This is the primary key of the preference type table in CMS.

{% enddocs %}

{% docs column__preference_name %}

The general name of preferences and attributes that a customer can choose. Common for the companies and countries.
For preference names specific for each company use instead the field called `preference_name_brand`.

{% enddocs %}

{% docs column__preference_description %}

The general description of preferences and attributes that a customer can choose. Common for the companies and countries. For preference descriptions specific for each company use instead the field called `preference_description_brand`.

{% enddocs %}

{% docs column__is_allergen %}

Is true when the corresponding preference is an allergen preference.

{% enddocs %}

{% docs column__is_onesub_concept_preference %}

Is true when the corresponding preference is a concept preference used after the OneSub migration. Found by checking if the source name starts with "Onesub".

{% enddocs %}

# Preference Types

{% docs column__preference_type_name %}

Type of preference (Concept, Taste, Optimization Preference or Selector Preference). This can be used across the companies.

{% enddocs %}

{% docs column__preference_type_description %}

Description of the preference type. This can be used across the companies.

{% enddocs %}

# Preferences Companies

{% docs column__preference_name_brand %}

The name of preferences and attributes that a customer can choose. Specific for each company. For the general name that can be used across companies, use instead the field called `preference_name`.

{% enddocs %}

{% docs column__preference_description_brand %}

The description of preferences and attributes that a customer can choose. Specific for each company. For the general description that can be used across companies, use instead the field called `preference_description`.

{% enddocs %}

{% docs column__is_active_preference %}

True if the preference is active for the customer to choose. False if its not active.

{% enddocs %}

# Preference Attribute Values

{% docs column__attribute_id_preference %}

The preferences can have different type of attributes. This id corresponds what the attribute is. E.g. `attribute_id = '680D1B8A-F967-4713-A270-8E30D683F4B8'` is the attribute for linked mealboxes.

{% enddocs %}

{% docs column__attribute_value_preference %}

The value for the selected attribute and preference. E.g. if the selected attribute is linked mealboxes and the preference is "Inspirational", then this value will be the mealbox product id that is linked to the preference "Inspirational".

{% enddocs %}

# Register Baskets

{% docs column__register_info_basket_id %}

This is the primary key of the register_info_basket table in CMS.

{% enddocs %}

# Register Products

{% docs column__register_info_product_id %}

This is the primary key of the register_info_products table in CMS.

{% enddocs %}

# Billing Agreements Preferences List
{% docs column__preference_id_list %}

List of preference IDs that belong to the same billing agreement.

{% enddocs %}

{% docs column__billing_agreement_preference_id_list %}

List of the unique ids in the source table billing_agreement_preference table, that belong to the same billing agreement.

{% enddocs %}

{% docs column__basket_products_list %}

A list of basket products objects based on the source table billing_agreement_basket_product.Each object contain the following:
* product_variation_id
* product_variation_quantity
* is_extra flag

{% enddocs %}

# Onesub Beta Agreements
{% docs column__is_internal %}

Billing Agreements of employees that was a part of the internal Onesub Launch.

{% enddocs %}

# Billing Agreement Basket Scheduler

{% docs column__billing_agreement_basket_scheduler_id %}

The ID of the basket scheduler in the CMS database.

{% enddocs %}

{% docs column__billing_agreement_basket_menu_week_id %}

The unique identifier for a specific menu week for a billing agreement basket. This is a composite key made up of the billing agreement basket ID, menu year and menu week.

{% enddocs %}


{% docs column__timeblock_id_basket_scheduler %}

The id of the timeblock if a customer has changed their timeblock for a particular week.
Corresponds to a timeblock in operations__timeblocks. 

{% enddocs %}

{% docs has_delivery %}

True if the created schedule will make a delivery, else False. Used to handle cancelled deliveries for a menu week.

{% enddocs %}

## Loyalty Orders
{% docs column__loyalty_order_id %}

The primary key of the loyalty order in the CMS database.

{% enddocs %}

{% docs column__order_week_monday_date %}

The Monday date of the week in which the loyalty order was placed.

{% enddocs %}

## Loyalty Order Lines
{% docs column__loyalty_order_line_id %}

The primary key of the loyalty order line in the CMS database.

{% enddocs %}

{% docs column__unit_point_price %}

The amount of loyalty points withdrawn per ordered product variation.

{% enddocs %}

{% docs column__total_point_price %}

The amount of loyalty points withdrawn for all ordered product variations on the order line.

{% enddocs %}

## Loyalty Order Statuses
{% docs column__loyalty_order_status_id %}

The primary key of the loyalty order status in the CMS database.

{% enddocs %}

{% docs column__loyalty_order_status_name %}

The name of the loyalty order status.

{% enddocs %}

# Loyalty Points
{% docs column__loyalty_points_id %}

The primary key of the loyalty points transaction in the CMS database.

{% enddocs %}

{% docs column__loyalty_points_parent_id %}

The ID of the parent loyalty points transaction, if this transaction is a child transaction.

{% enddocs %}

{% docs column__transaction_reason %}

Additional information explaining why the loyalty points transaction took place. Typically used for comments when points are added or removed by Customer Service.

{% enddocs %}

{% docs column__points_expiration_date %}

The date when these loyalty points will expire if not used.

{% enddocs %}

{% docs column__transaction_points %}

The number of points added or deducted in this transaction. Positive numbers indicate points earned, negative numbers indicate points spent or deducted.

{% enddocs %}

{% docs column__remaining_points %}

The remaining balance of loyalty points after this transaction.

{% enddocs %}

# Billing Agreements Consents
{% docs column__billing_agreement_consent_id %}

A concatenation of billing_agreement_id and consent_id. Is unique for the source system data, but need to be combined with valid_from to be unique as we snapshot the table to capture history.

{% enddocs %}

{% docs column__is_accepted_consent %}

Is true if the consent are currently accepted. Becomes false if the customer removes the consent again. If the customer has never accepted the consent a row in the table would never exist.

{% enddocs %}

# Consents
{% docs column__consent_id %}

The unique id of the consent in CMS.

{% enddocs %}

{% docs column__consent_name %}

The name of the consent. E.g. "Accepted SMS communication" or "Accepted Data Retention Consent".

{% enddocs %}

# Consent Categories

{% docs column__consent_category_id %}

The unique id of the consent category in CMS.

{% enddocs %}

{% docs column__consent_category_name %}

The name of the consent category. E.g. "Accept communication" or "Allergy".

{% enddocs %}

# Discounts

{% docs column__discount_id %}

This is the primary key of the discount table in CMS.

{% enddocs %}

{% docs column__discount_title %}

The title of the discount.

{% enddocs %}

{% docs column__discount_partner_invoice_reference %}

We have partners who purchase discounts to share with third parties such as customers end employees and are invoiced for the discount. This is the reference for invoicing those partners.

{% enddocs %}

{% docs column__customer_usage_limit %}

Indicates the maximum number of times a customer can use a discount.

{% enddocs %}

{% docs column__discount_amount %}

The size of the discount. Can be either in money(kr) or % based on discount_amount_type_id.

{% enddocs %}

{% docs column__discount_partner_price %}

We have partners who purchase discounts to share with third parties such as customers and employees and are invoiced for the discount. This is the price they pay for each discount.

{% enddocs %}

{% docs column__is_active_discount %}

True if discount is active. If a discount isn't active, it cannot be added to an account or applied to an order.

{% enddocs %}

{% docs column__is_coupon_code_required %}

True if coupon code is required for discount.

{% enddocs %}

{% docs column__is_cumulative_discount %}

True if discount can be combined with other discounts.

{% enddocs %}

{% docs column__is_valid_on_direct_order %}

True if discount can be used on direct order (products outside of subscription such as seasonal products).

{% enddocs %}

{% docs column__is_registration_discount %}

True if discount can only be used by new customers.

{% enddocs %}

{% docs column__is_disabled_on_freeze %}

True if discount is inactivated when a customer freezes their account (status change).

{% enddocs %}

{% docs column__is_highest_price_discount %}

True if discount should only be applied to the product with the highest price on the order. The highest priced product will normally be the mealbox.

{% enddocs %}

{% docs column__discount_valid_from %}

First date when the discount can be applied to an order. If cut-off is before this date, the discount won't be added on the order.

{% enddocs %}

{% docs column__discount_valid_to %}

Last date when the discount can be applied to an order. If cut-off is after this date, the discount won't be added on the order.

{% enddocs %}

{% docs column__discount_registration_valid_from %}

Date from which a customer can add the discount.

{% enddocs %}

{% docs column__discount_registration_valid_to %}

Last date a customer can add the discount.

{% enddocs %}

# Discount Usage Types

{% docs column__discount_usage_type_id %}

...

{% enddocs %}

# Discount Amount Types

{% docs column__discount_amount_type_id %}

...

{% enddocs %}

# Discount Types

{% docs column__discount_type_id %}

...

{% enddocs %}

# Discount Categories

{% docs column__discount_category_id %}

This is the primary key of the discount_category table in CMS.

{% enddocs %}

{% docs column__discount_category_name %}

The name of the category of the discount which is the second step in the discount hierarchy (Channel->Category->Sub Category)

{% enddocs %}

# Discount Sub Categories

{% docs column__discount_sub_category_id %}

This is the primary key of the discount_sub_category table in CMS.

{% enddocs %}

{% docs column__discount_sub_category_name %}

The name of the sub-category of the discount which is the second step in the discount hierarchy (Channel->Category->Sub Category)

{% enddocs %}

# Discount Channels

{% docs column__discount_channel_id %}

This is the primary key of the discount_channel table in CMS.

{% enddocs %}

{% docs column__discount_channel_name %}

The name of the channel of the discount which is the first step in the discount hierarchy (Channel->Category->Sub Category)

{% enddocs %}

# Coupon Code Type

{% docs column__discount_coupon_type_id %}

...

{% enddocs %}

# Addresses
{% docs column__shipping_address_id %}

The id of the shipping address in the subscription of the billing agreement.

{% enddocs %}

{% docs column__postal_code_shipping_address %}

The postal code of the shipping address as in cms.
Postal codes have been transformed to ensure they have the correct length by appending leading zeroes where applicable.

{% enddocs %}


{% docs column__is_geo_restricted %}

If the value is 0 then the address is valid and can have deliveries. If 1, it means deliveries cannot be made to this address.

{% enddocs %}

# Billing Agreement Order Discounts

{% docs column__billing_agreement_order_discount_id %}

This is the primary key of the billing_agreement_order_discount table in CMS.

{% enddocs %}

{% docs column__discount_order_cancelled_relation_id %}

Each discount line has one credit line and one debit line in billing_agreement_order_discount. The related credit line is the row where billing_agreement_order_discount_id is the same as in this column. COlumn will be NULL for all credit lines.

{% enddocs %}

# Discount Criterias

{% docs column__discount_criteria_id %}

This is the primary key of the discount_criteria table in CMS.

{% enddocs %}

# Discount Coupons

{% docs column__discount_coupon_code_id %}

This is the primary key of the discount_coupon table in CMS.

{% enddocs %}
