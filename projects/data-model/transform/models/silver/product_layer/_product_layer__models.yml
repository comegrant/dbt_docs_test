models:
  - name: product_layer__price_campaign_products
    description: "Table holding price campaign products for a given product variation."
    columns:
      - name: price_campaign_product_id
        data_type: varchar(36)
        description: "{{ doc('column__price_campaign_product_id') }}"
        data_tests:
          - unique
          - not_null

      - name: company_id
        data_type: varchar(36)
        description: "{{ doc('column__company_id') }}"
        data_tests:
          - not_null

      - name: product_variation_id
        data_type: varchar(36)
        description: "{{ doc('column__product_variation_id') }}"
        data_tests:
          - not_null

      - name: menu_week_from
        data_type: int
        description: "{{ doc('column__menu_week_from') }}"
        data_tests:
          - not_null

      - name: menu_year_from
        data_type: int
        description: "{{ doc('column__menu_year_from') }}"
        data_tests:
          - not_null

      - name: menu_week_to
        data_type: int
        description: "{{ doc('column__menu_week_to') }}"

      - name: menu_year_to
        data_type: int
        description: "{{ doc('column__menu_year_to') }}"

      - name: price_ex_vat
        data_type: decimal(20, 2)
        description: "{{ doc('column__price_ex_vat') }}"
        data_tests:
          - not_null

      - name: vat
        data_type: decimal(6, 2)
        description: "{{ doc('column__vat') }}"
        data_tests:
          - not_null

      - name: target_margin
        data_type: decimal(10, 2)
        description: "{{ doc('column__target_margin') }}"
        data_tests:
          - not_null

      - name: valid_from
        data_type: timestamp
        description: "{{ doc('column__valid_from') }}"
        data_tests:
          - not_null

      - name: valid_to
        data_type: timestamp
        description: "{{ doc('column__valid_to') }}"

      - name: is_base_campaign
        data_type: boolean
        description: "{{ doc('column__is_base_campaign') }}"
        data_tests:
          - not_null

      - name: comment
        data_type: string
        description: "{{ doc('column__comment') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"

  - name: product_layer__product_concepts
    description: ""
    columns:
      - name: product_concept_id
        data_type: varchar(36)
        description: "{{ doc('column__product_concept_id') }}"
        data_tests:
          - unique
          - not_null

      - name: product_concept_name
        data_type: string
        description: "{{ doc('column__product_concept_name') }}"
        data_tests:
          - not_null

      - name: product_concept_description
        data_type: string
        description: "{{ doc('column__product_concept_description') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null

  - name: product_layer__product_types_concepts
    description: ""
    data_tests:
      - unique:
          column_name: "(product_concept_id || '-' || product_type_id)"
    columns:
      - name: product_concept_id
        data_type: varchar(36)
        description: "{{ doc('column__product_concept_id') }}"
        data_tests:
          - not_null

      - name: product_type_id
        data_type: varchar(36)
        description: "{{ doc('column__product_type_id') }}"
        data_tests:
          - not_null

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null

  - name: product_layer__product_types
    description: ""
    columns:
      - name: product_type_id
        data_type: varchar(36)
        description: "{{ doc('column__product_type_id') }}"
        data_tests:
          - unique
          - not_null

      - name: product_type_name
        data_type: string
        description: "{{ doc('column__product_type_name') }}"
        data_tests:
          - not_null

      - name: product_type_description
        data_type: string
        description: "{{ doc('column__product_type_description') }}"

      - name: is_physical_product
        data_type: boolean
        description: "{{ doc('column__is_physical_product') }}"
        data_tests:
          - not_null

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null

  - name: product_layer__products
    description: ""
    columns:
      - name: product_id
        data_type: varchar(36)
        description: "{{ doc('column__product_id') }}"
        data_tests:
          - unique
          - not_null

      - name: product_type_id
        data_type: varchar(36)
        description: "{{ doc('column__product_type_id') }}"
        data_tests:
          - not_null

      - name: product_status_id
        data_type: int
        description: "{{ doc('column__product_status_id') }}"
        data_tests:
          - not_null

      - name: product_name
        data_type: string
        description: "{{ doc('column__product_name') }}"
        data_tests:
          - not_null

      - name: product_description
        data_type: string
        description: "{{ doc('column__product_description') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null

  - name: product_layer__product_statuses
    description: ""
    columns:
      - name: product_status_id
        data_type: int
        description: "{{ doc('column__product_status_id') }}"
        data_tests:
          - unique
          - not_null

      - name: product_status_name
        data_type: string
        description: "{{ doc('column__product_status_name') }}"
        data_tests:
          - not_null

  - name: product_layer__product_variations
    description: ""
    columns:
      - name: product_variation_id
        data_type: varchar(36)
        description: "{{ doc('column__product_variation_id') }}"
        data_tests:
          - unique
          - not_null

      - name: product_id
        data_type: varchar(36)
        description: "{{ doc('column__product_id') }}"
        data_tests:
          - not_null

      - name: sku
        data_type: string
        description: "{{ doc('column__sku') }}"
        data_tests:
          - not_null

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null

  - name: product_layer__product_variations_companies
    description: "Table holding company specific information for a product variation."
    config:
      contract:
        enforced: true
    data_tests:
      - unique:
          column_name: "(product_variation_id || '-' || company_id)"
    columns:
      - name: product_variation_id
        data_type: varchar(36)
        description: "{{ doc('column__product_variation_id') }}"
        data_tests:
          - not_null

      - name: company_id
        data_type: varchar(36)
        description: "{{ doc('column__company_id') }}"
        data_tests:
          - not_null

      - name: product_variation_name
        data_type: string
        description: "{{ doc('column__product_variation_name') }}"
        data_tests:
          - not_null

      - name: product_variation_description
        data_type: string
        description: "{{ doc('column__product_variation_description') }}"

      - name: sent_to_frontend
        data_type: boolean
        description: "{{ doc('column__sent_to_frontend') }}"

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null

  - name: product_layer__product_variation_attribute_values
    description: ""
    data_tests:
      - unique:
          column_name: "(product_variation_id || '-' || attribute_id || '-' || company_id)"
    columns:
      - name: attribute_id
        data_type: varchar(36)
        description: "{{ doc('column__attribute_id') }}"
        data_tests:
          - not_null

      - name: product_variation_id
        data_type: varchar(36)
        description: "{{ doc('column__product_variation_id') }}"
        data_tests:
          - not_null

      - name: company_id
        data_type: varchar(36)
        description: "{{ doc('column__company_id') }}"
        data_tests:
          - not_null

      - name: attribute_value
        data_type: string
        description: "{{ doc('column__attribute_value') }}"
        data_tests:
          - not_null

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null

  - name: product_layer__product_variation_attribute_templates
    description: ""
    columns:
      - name: attribute_id
        data_type: varchar(36)
        description: "{{ doc('column__attribute_id') }}"
        data_tests:
          - unique
          - not_null

      - name: product_type_id
        data_type: varchar(36)
        description: "{{ doc('column__product_type_id') }}"
        data_tests:
          - not_null

      - name: attribute_name
        data_type: string
        description: "{{ doc('column__attribute_name') }}"
        data_tests:
          - not_null

      - name: attribute_default_value
        data_type: string
        description: "{{ doc('column__attribute_default_value') }}"
        data_tests:
          - not_null

      - name: attribute_data_type
        data_type: string
        description: "{{ doc('column__attribute_data_type') }}"
        data_tests:
          - not_null

      - name: source_created_at
        data_type: timestamp
        description: "{{ doc('column__source_created_at') }}"
        data_tests:
          - not_null

      - name: source_created_by
        data_type: string
        description: "{{ doc('column__source_created_by') }}"
        data_tests:
          - not_null

      - name: source_updated_at
        data_type: timestamp
        description: "{{ doc('column__source_updated_at') }}"
        data_tests:
          - not_null

      - name: source_updated_by
        data_type: string
        description: "{{ doc('column__source_updated_by') }}"
        data_tests:
          - not_null

