models: 
  - name: segment__deviations_ordered
    description: "Changes made to the basket by customers or customer service."
    columns:
      - name: deviations_ordered_id
        data_type: string
        description: "{{ doc('column__deviations_ordered_id') }}"
        data_tests:
          - unique
          - not_null

      - name: ce_deviation_ordered_id
        data_type: varchar(1024)
        description: "{{ doc('column__ce_deviation_ordered_id') }}"
        data_tests:
          - not_null

      - name: action_done_by
        data_type: string
        description: "{{ doc('column__action_done_by') }}"
        data_tests:
          - not_null

      - name: billing_agreement_id
        data_type: int
        description: "{{ doc('column__billing_agreement_id') }}"
        data_tests:
          - not_null

      - name: company_id
        data_type: string
        description: "{{ doc('column__company_id') }}"
        data_tests:
          - not_null
          - accepted_values:
              values: [
                  '6A2D0B60-84D6-4830-9945-58D518D27AC2'
                , '8A613C15-35E4-471F-91CC-972F933331D7'
                , '09ECD4F0-AE58-4539-8E8F-9275B1859A19'
                , '5E65A955-7B1A-446C-B24F-CFE576BF52D7'
              ]

      - name: delivery_year
        data_type: int
        description: "{{ doc('column__delivery_year') }}"
        data_tests:
          - not_null

      - name: delivery_week
        data_type: int
        description: "{{ doc('column__delivery_week') }}"
        data_tests:
          - not_null

      - name: delivery_week_monday_date
        data_type: date
        description: "{{ doc('column__delivery_week_monday_date') }}"
        data_tests:
          - not_null

      - name: event_text
        data_type: string
        description: "{{ doc('column__event_text') }}"

      - name: product_id
        data_type: string
        description: "{{ doc('column__product_id') }}"
        data_tests:
          - not_null

      - name: product_name
        data_type: string
        description: "{{ doc('column__product_name') }}"

      - name: product_price
        data_type: int
        description: "Not known what this price is, it seems to deviate from the price in the product_variation_attribute_value table in product_layer."

      - name: product_variation_quantity
        data_type: int
        description: "{{ doc('column__product_variation_quantity_deviations_ordered') }}"
        data_tests:
          - not_null

      - name: product_type_id
        data_type: string
        description: "{{ doc('column__product_type_id') }}"

      - name: product_type_name
        data_type: string
        description: "{{ doc('column__product_type_name') }}"

      - name: product_variation_id
        data_type: string
        description: "{{ doc('column__product_variation_id') }}"
        data_tests:
          - not_null

      - name: product_variation_name
        data_type: string
        description: "{{ doc('column__product_variation_name') }}"

      - name: taste_preferences
        data_type: string
        description: "{{ doc('column__taste_preferences') }}"

      - name: concept_preferences
        data_type: string
        description: "{{ doc('column__concept_preferences') }}"

      - name: source_received_at
        data_type: timestamp
        description: "{{ doc('column__source_received_at') }}"
        data_tests:
          - not_null

      - name: source_sent_at
        data_type: timestamp
        description: "{{ doc('column__source_sent_at') }}"
        data_tests:
          - not_null