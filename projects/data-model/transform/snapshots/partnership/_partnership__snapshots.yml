snapshots:
  - name: scd_partnership__company_partnerships
    description: Tracks updates to company partnerships in the company_partnership table.
    config:
      unique_key: id
      strategy: timestamp
      updated_at: updated_at
      dbt_valid_to_current: null
      invalidate_hard_deletes: True

  - name: scd_partnership__company_partnership_rules
    description: Tracks updates to company partnership rules in the company_partnership_rule table.
    config:
      unique_key: id
      strategy: timestamp
      updated_at: updated_at
      dbt_valid_to_current: null
      invalidate_hard_deletes: True

  - name: scd_partnership__company_partnership_rules_list
    description: Track active rules for each company partnership. Currently not in use, but exist in case it will be useful later.
    config:
      unique_key: company_partnership_id
      strategy: check
      check_cols: ['partnership_rule_ids_list']
      dbt_valid_to_current: null
      invalidate_hard_deletes: True

  - name: scd_partnership__billing_agreement_partnerships
    description: Snapshot is_active status on billing_agreement_ids with a relationship to a partnership. The is_active field determines whether the agreement qualifies for partnership points.
    config:
      unique_key: id
      strategy: timestamp
      updated_at: updated_at
      dbt_valid_to_current: null
      invalidate_hard_deletes: True
