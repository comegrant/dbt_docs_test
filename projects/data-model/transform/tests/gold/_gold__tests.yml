version: 2

data_tests:
  - name: fact_orders_missing_recipe_id
    description: >
      Make sure that all ordered dishes with an order line has a recipe (i.e. does not test chef composed mealbox recipes)

  - name: fact_estimations_is_latest_estimations_flag
    description: >
      Makes sure there is one and only one timestamp per company with is_latest_estimation = true
  
  - name: fact_menus_one_menu_id_per_product_variation_id
    description: >
      Test that there is only one menu_id per product_variation_id for a menu week in Fact Menus

  - name: dim_loyalty_seasons_no_overlaps
    description: >
      Ensure there are no overlapping loyalty seasons per company
  
  - name: fact_forecast_variations_recipes_exist_for_dishes
    description: >
      Ensure that all forecasted dishes have an associated recipe
    config:
      severity: warn