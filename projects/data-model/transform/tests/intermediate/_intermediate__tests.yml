version: 2

data_tests:
  - name: unique__int_billing_agreement_preferences_unioned__billing_agreement_preferences_updated_id
    description: >
      Make sure that billing_agreement_preferences_updated_id in int_billing_agreement_preferences_unioned is unique.

  - name: int_upcoming_blacklisted_timeblocks_and_postal_codes_uniqueness
    description: >
      Tests that the combination of columns timeblock_id + menu_year + menu_week + company_id + zone_id + postal_code is unique in int_blacklisted_timeblocks_and_postal_codes.
      This to ensure there are no duplicates.

  - name: int_forecast_orders_job_run_metadata_joined_row_counts
    description: >
      Test to ensure that forecast orders has one row for every forecast_job, forecast_group, forecast_model, menu_year, menu_week, horizon_index, forecast_horizon 
      where flagged as is_most_recent_for_menu_week_and_horizon_index.

  - name: int_forecast_variations_metadata_external_estimates_joined_row_counts
    description: >
      Test to ensure that forecast variations has one row for every forecast_job, forecast_group, forecast_model, menu_year, menu_week, product_variation_id, horizon_index, forecast_horizon 
      where flagged as is_most_recent_for_menu_week_and_horizon_index.